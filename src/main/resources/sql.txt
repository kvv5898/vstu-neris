create table received
(
equipment_id SERIAL PRIMARY KEY,
sn TEXT NOT null,
group_id integer not null,
guarantee_id integer not null
);

create table group
(
group_id SERIAL PRIMARY KEY,
description TEXT,
model TEXT,
group_info TEXT,
);


create table organization
(
organization_id SERIAL PRIMARY KEY,
description TEXT,
tel VARCHAR(24) not null,
address TEXT,
organization_info TEXT
);
insert into organization (description, tel, address, organization_info)
values ('Linkinpark', '+375298787878', 'г. Витебск ул. Горовца д.12 каб.17 ',  '№ 367452 Иван');

insert into organization (description, tel, address, guarantee_id, organization_info)
values ('special_master', '+375291112222', 'г. Гомель ул. Кирова д.72 каб.25 ',  '№ 35641 Таня');


create table guarantee
(
guarantee_id SERIAL PRIMARY KEY,
organization_id integer not null,
validity_id integer not null
)

insert into guarantee (organization_id, validity_id)
values ('1', '1');

create table validity
(
validity_id SERIAL PRIMARY KEY,
date TEXT NOT null,
month VARCHAR(4) not null,
org_info text not NULL,
contract TEXT NOT null,
validity_info TEXT
);

insert into validity (date, month, org_info, contract, validity_info)
values ('2020-06-25', '36', 'Linkinpark', '5654AAZ', 'постгарантия по доп. условию');

create table history
(
history_id SERIAL PRIMARY KEY,
equipment_id VARCHAR(256) NOT null,
status TEXT NOT null,
organization_id VARCHAR(256)
);

create table user_account
(
user_id SERIAL PRIMARY KEY,
date TEXT NOT null,
Surname VARCHAR(30) not null,
First_Name VARCHAR(30) not null,
Otchestvo VARCHAR(30) not null,
Otdel VARCHAR(30) not null,
Tel VARCHAR(30) not null,	
email varchar(128),
User_Name VARCHAR(30) not null,
PASSWORD  VARCHAR(30) not null,
Rule VARCHAR(10) not null
);

create table auth
(
id SERIAL PRIMARY KEY,
date_start TEXT NOT null,
date_end TEXT,
ip TEXT NOT null,
host TEXT,
getway TEXT,
user_in TEXT,
pass_in TEXT,
session TEXT NOT null,
status VARCHAR(8) NOT null
);


Select organization_id, description, tel, address, (SELECT date from guarantee WHERE guarantee.guarantee_id=organization.guarantee_id) as guarantee, organization_info
from organization